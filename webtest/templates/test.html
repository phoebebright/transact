{% extends "base.html" %}

{% block extra_head %}
    <script type="text/javascript" src="/static/js/jquery-1.7.1.js"></script>
    <script type="text/javascript" src="/static/js/crsf.js"></script>
    <script type="text/javascript" src="/static/js/JSON.js"></script>
    <script type="text/javascript" src="/static/webtest/js/main.js"></script>
    <script type="text/javascript">

    jQuery(document).ready(function() {

        jQuery('#call_api').click(function(){
            send_call(jQuery('#call_content').val(), display_call);
            return false;
        });
        
        
        
        function login(){
            /* uses login to authenticate the user */
            var data = {
                "call": "LOGIN",
                "username": "test",
                "password": "silicon"
            }
            send_call(data, function(response){
                if(response["status"]=="OK"){
                
                    jQuery(response["token"]).replaceAll(".token");
                }else{
                    var box_content = "<p>Sorry, authentication was not possible at this moment. Try refreshing the page.";
                    showModal(box_content);
                }
            });
        
        }        
    });
    </script>

{% endblock %}
{% block main %}
<h1>{% block heading %}Web test of TransAct api{% endblock heading %}</h1>

{% block doc %}{%endblock doc %}
<hr />

<form id="call_form" target="." >
    <label class="fullwidth">Paste your JSON into content area</label><textarea id="call_content">{% block examplejson %}{% endblock examplejson %}</textarea><br/>
    <p class="align-right"><input id="call_api" type="button" class="button" value="Send"></p>
</form>
<h4>Call response below:</h4>
<div id="call_response"></div>

{% endblock main %}
